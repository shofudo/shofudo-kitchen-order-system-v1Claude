# きぬ川不動瀧 オーダーシステム - 更新内容

## 今回の更新内容

### 1. キッチン画面の通知音改善 ✅

**問題点**:
- Androidタブレットでは、ユーザー操作なしではAudioContextが有効化されず、通知音が鳴らない

**解決策**:
- **「🔔 通知音テスト」ボタンを追加**
  - キッチン画面の上部に配置
  - ボタンをタップするとAudioContextを初期化し、テスト音を再生
  - 初期化成功後、ボタンは「✅ 通知音が有効です」と表示され、3秒後に非表示

**運用方法**:
1. 朝、キッチン画面を開く
2. 「🔔 通知音テスト」ボタンを1回タップ
3. 「ピロン♪」という音が鳴れば準備完了
4. その日はホールから注文が入るたびに自動で通知音が鳴ります

---

### 2. PWA化(URLバー非表示) ✅

**追加ファイル**:
- `manifest.json` - ホール用PWA設定
- `manifest-kitchen.json` - キッチン用PWA設定
- `sw.js` - Service Worker(オフライン対応・キャッシュ)

**メリット**:
- URLバーが表示されず、アプリのようなフルスクリーン表示
- ホーム画面から直接起動できる
- オフラインでも一部機能が使用可能

**インストール方法**:
- 詳細は `PWA_INSTALL.md` を参照

---

## ファイル一覧

### メインファイル
- `index.html` - ホール用画面(PWA対応済み)
- `kitchen.html` - キッチン用画面(PWA対応・通知音テストボタン追加済み)

### PWA関連
- `manifest.json` - ホール用PWA設定
- `manifest-kitchen.json` - キッチン用PWA設定
- `sw.js` - Service Worker

### ドキュメント
- `PWA_INSTALL.md` - PWAのインストール手順
- `ICON_README.md` - アイコンの作成方法
- `GITHUB_PAGES_SETUP.md` - GitHub Pagesの設定方法

---

## 🎯 重要なポイント

### すべてのパスは相対パスで設定済み ✅

**良いニュース**: すべてのファイルパスは相対パス(`./`)で設定しているため、**どのようなGitHub Pages構成でもパスの修正は不要**です!

- `ユーザー名.github.io` リポジトリ → そのまま使える ✅
- プロジェクトリポジトリ(例: `username.github.io/repo-name/`) → そのまま使える ✅

### sw.jsの配置場所

**重要**: `sw.js` は必ず `index.html` と **同じ階層**(リポジトリのルート)に配置してください。

```
your-repo/
├── index.html       ← ここと
├── kitchen.html
├── sw.js           ← ここが同じ階層
├── manifest.json
└── ...
```

---

## セットアップ手順

### 1. GitHubにアップロード

すべてのファイルをGitHubリポジトリにアップロードしてください:

```
your-repo/
├── index.html
├── kitchen.html
├── manifest.json
├── manifest-kitchen.json
├── sw.js
├── icons/
│   ├── icon-192.png   ← 作成が必要
│   └── icon-512.png   ← 作成が必要
└── (その他のドキュメント)
```

### 2. アイコンを作成

`ICON_README.md` の手順に従って、アイコン画像を作成し、`icons` フォルダに配置してください。

### 3. GitHub Pagesを有効化

`GITHUB_PAGES_SETUP.md` の手順に従って、GitHub Pagesを設定してください。

### 4. PWAをインストール

`PWA_INSTALL.md` の手順に従って、各タブレットにPWAをインストールしてください。

---

## 動作確認

### キッチン側

1. ホーム画面の「キッチン」アイコンをタップ
2. URLバーが表示されないことを確認
3. 「🔔 通知音テスト」ボタンをタップ
4. 「ピロン♪」という音が鳴ることを確認

### ホール側

1. ホーム画面の「オーダー」アイコンをタップ
2. URLバーが表示されないことを確認
3. 注文を「注」ステータスにする
4. キッチン側で通知音が鳴ることを確認

---

## トラブルシューティング

### 通知音が鳴らない

→ `PWA_INSTALL.md` の「トラブルシューティング」セクションを参照

### URLバーが消えない

→ `GITHUB_PAGES_SETUP.md` の「トラブルシューティング」セクションを参照

### アイコンが表示されない

→ `ICON_README.md` を参照してアイコンを作成・配置

---

## 補足

- PWAは通常のウェブアプリなので、ブラウザからもアクセスできます
- インストールは任意です。通常のブラウザでの使用も可能です
- アイコンがない状態でもPWAとして動作しますが、デフォルトのアイコンが使用されます

---

## 今後の運用

### 毎朝の準備

**キッチン側**:
1. ホーム画面の「キッチン」アイコンをタップ
2. 「🔔 通知音テスト」ボタンを1回タップ
3. 音が鳴れば準備完了

**ホール側**:
1. ホーム画面の「オーダー」アイコンをタップ
2. 通常通り使用

### アップデート時

GitHubリポジトリのファイルを更新すると、次回アクセス時に自動的に新しいバージョンが適用されます。

---

## 変更履歴

### 2024-XX-XX
- キッチン画面に「通知音テスト」ボタンを追加
- PWA化(manifest.json, Service Worker追加)
- URLバー非表示に対応
- アイコン対応
